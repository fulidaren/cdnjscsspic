(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{52:function(i,e,t){i.exports=t("K8fp")},K8fp:function(i,e,n){"use strict";(function(a){var i=n("TqRt");n("V+eJ"),n("dRSK");var e=i(n("lwsE")),t=i(n("W8MJ"));n("S/QB");var s=i(n("gtjA")),l=i(n("ixR2")),d=function(){function i(){(0,e["default"])(this,i),this.wrapper=null,this.loadedPage=[],this.init()}return(0,t["default"])(i,[{key:"init",value:function(){this.initScroll(),this.wrapper.bs.goToPage(6,0,0),a("#slider-item-7").find(".comic-item").show(),this.bindEventInit()}},{key:"bindEventInit",value:function(){var t=a(window).width(),s=a(".js_date_list li");this.wrapper.bs.on("scrollEnd",function(i){var e=Math.round(Math.abs(i.x/t));a(".topbar-item.active").index()!==e&&s.eq(e).addClass("active").siblings("li").removeClass("active")});var e=this;a(".js_date_list").on("click","li",function(){a(this).addClass("active"),a(this).siblings("li").removeClass("active");var i=a(this).index();e.reloadPageData(i),e.wrapper.bs.goToPage(i,0,300,{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(i){return i*(2-i)}})})}},{key:"initScroll",value:function(){a("#sliderWrapper").css("height",a(window).height()-a(".js_date_bar").height()-a(".view-footer").height()+"px"),this.wrapper=new s["default"]("#sliderWrapper",{scrollX:!0,scrollY:!1},{eventPassthrough:"vertical",momentum:!1,snap:{loop:!1,threshold:.3,speed:400},stopPropagation:!0});var i=a("#J_updateViewPort").width(),e=a(".js_slider_group").children(".js_slider_item");a(".js_slider_group").css({width:e.length*i}),a(".js_slider_item").css({width:i}),this.wrapper.bs.refresh()}},{key:"reloadPageData",value:function(i){-1<this.loadedPage.indexOf(i)||(this.loadedPage.push(i),a("#slider-item-".concat(i+1)).find(".comic-item").show())}}]),i}();a(function(){var t,s,n=new l["default"]({ejs:{delimiter:"$"}});t=function(i){var e=n.ejs.render('<header class="view-header">\n    <div class="date-bar js_date_bar">\n      <ul class="bar-list js_date_list">\n        <$ if(updateList && updateList.length){ $>\n        <$ for(var i=0; i < updateList.length; i++){ $>\n        <li class="topbar-item<$= i === updateList.length - 1 ? \' active\' : \'\'$>">\n        <span class="date-item">\n          <$= updateList[i].comicUpdateDate_new $>\n        </span>\n        </li>\n        <$ } $>\n        <$ } $>\n      </ul>\n    </div>\n  </header>',{updateList:i.update}),t=n.ejs.render('<div class="slider bs-wrapper" id="sliderWrapper">\n      <div class="bs-content slider-group js_slider_group">\n        <$ for(var k=0; k < updateList.length; k++){ $>\n        <div class="slider-item js_slider_item bs-wrapper" id="slider-item-<$= k+1 $>">\n            <div class="update-items">\n              <$ var comicItem = updateList[k].info $>\n              <$ if( comicItem.length > 0){ $>\n              <div class="list-warp">\n                <ul class="update-list col3">\n                  <$ for (var index=0; index < comicItem.length; index++) { $>\n                    <$ var item = comicItem[index] $>\n                    <li class="item comic-item">\n                      <a href="/<$= utils.getComicId(siteConf, item) $>/" \n                      title="<$= item.comic_name $>,<$= item.comic_name.addEnd(\'漫画\') $>">\n                        <div class="thumbnail">\n                          <img class="img" src="<$= siteConf.staticRoot $>images/comm/space.gif"\n                          data-src="<$= utils.formatImgSrc(siteConf, item.comic_id) $>"\n                          alt="<$= item.comic_name $>,<$= item.comic_name.addEnd(\'漫画\') $>" />\n                          <$ if(item.score){ $>\n                          <span class="score"><$= item.score.toFixed(1) $></span>\n                          <$ } $>\n                          <$ if(item.last_chapter_name){ $>\n                          <span class="chapter"><$= item.last_chapter_name $></span>\n                          <$ } $>\n                        </div>\n                        <p class="title"><$= item.comic_name $></p>\n                        <$ if(item.desc){ $>\n                        <p class="desc"><$= item.desc $></p>\n                        <$ } $>\n                      </a>\n                    </li>\n                    <$ } $>\n                </ul>\n                <p class="scroll-bottom-tips">\n                  已经到底啦，看看前一天吧~\n                </p>\n              </div>\n              <$ } else { $>\n              <div class="nocontent-tips">\n                <div class="tips-pic">\n                  <div class="stick-pic"></div>\n                  <p class="tips-text">\n                    <$= siteConf.language.highness $>，今天的漫画点心还在料理中哦~\n                  </p>\n                </div>\n              </div>\n              <$ } $>\n            </div>\n          </div>\n          <$ } $>\n      </div>\n    </div>',{updateList:i.update,utils:n.util});a("#J_updateHeader").html(e).removeClass("hide"),a("#J_updateViewBody").html(t).removeClass("hide"),window.update=new d},s=n.layer.loading(),n.util.ajax({url:"/api/updatelist/"},function(i,e){n.layer.close(s),i?n.layer.toast(i):"function"==typeof t&&t(e)})})}).call(this,n("+2Rf"))},"S/QB":function(i,e,t){}},[[52,0,1]]]);